# GS1 Parser

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ TypeScript/JavaScript –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ GS1 —Å—Ç—Ä–æ–∫ –æ—Ç —Å–∫–∞–Ω–µ—Ä–æ–≤ —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ —Å–∫–∞–Ω–µ—Ä—ã –∑–∞–º–µ–Ω—è—é—Ç ASCII 29 (Group Separator) –Ω–∞ –¥—Ä—É–≥–∏–µ —Å–∏–º–≤–æ–ª—ã.

> üìñ [English version](README_EN.md)

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ GS1 —Å—Ç—Ä–æ–∫ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ Application Identifiers (AI)
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π –º–µ–∂–¥—É AI
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–∫–∞–Ω–µ—Ä–∞ (–ø—Ä–æ–±–µ–ª—ã, "029", –∏ —Ç.–¥.)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∑–∞–º–µ–Ω—ã —Å–∫–∞–Ω–µ—Ä–∞
- ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è AI 91-99 –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π (–ø—Ä–∏–≤–µ—Ç, –ß–µ—Å—Ç–Ω—ã–π –ó–Ω–∞–∫)
- ‚úÖ –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TypeScript —Å –ø–æ–ª–Ω—ã–º–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ —Ç–∏–ø–æ–≤
- ‚úÖ –û–±—à–∏—Ä–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install @trin4ik/gs1parser
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```typescript
import { GS1Parser, parseGS1 } from '@trin4ik/gs1parser';

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞
const parser = new GS1Parser();
const result = parser.parse('010123456789012891INTERNAL92DATA');

// –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–¥–æ–±–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
const result = parseGS1('010123456789012891INTERNAL92DATA');

console.log(result);
// {
//   success: true,
//   tokens: [
//     { ai: '01', value: '01234567890128', variable: false, startPos: 0, endPos: 16 },
//     { ai: '91', value: 'INTERNAL', variable: true, startPos: 16, endPos: 24 },
//     { ai: '92', value: 'DATA', variable: true, startPos: 24, endPos: 28 }
//   ],
//   cleanedString: '0101234567890128{GS}91INTERNAL{GS}92DATA'
// }
```

## –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API

### –ö–ª–∞—Å—Å GS1Parser

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```typescript
new GS1Parser(config?: GS1ParserConfig)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
- `separator?: string` - –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –≤–º–µ—Å—Ç–æ `{GS}` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `'{GS}'`)
- `prioritize9199?: boolean` - –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–∏ AI 91-99 –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –≥—Ä–∞–Ω–∏—Ü (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `true`)
- `scannerReplacements?: Record<string, string>` - –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∑–∞–º–µ–Ω—ã —Å–∫–∞–Ω–µ—Ä–∞

#### –ú–µ—Ç–æ–¥—ã

##### `parse(input: string): GS1ParseResult`

–ü–∞—Ä—Å–∏—Ç GS1 —Å—Ç—Ä–æ–∫—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `input: string` - GS1 —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```typescript
{
  success: boolean;
  tokens: GS1Token[];
  cleanedString: string;
  error?: string;
}
```

##### `addScannerReplacement(pattern: string, replacement: string): void`

–î–æ–±–∞–≤–ª—è–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –∑–∞–º–µ–Ω—ã —Å–∫–∞–Ω–µ—Ä–∞.

##### `removeScannerReplacement(pattern: string): boolean`

–£–¥–∞–ª—è–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –∑–∞–º–µ–Ω—ã —Å–∫–∞–Ω–µ—Ä–∞.

##### `getScannerReplacements(): Map<string, string>`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∑–∞–º–µ–Ω—ã —Å–∫–∞–Ω–µ—Ä–∞.

### –£–¥–æ–±–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è

#### `parseGS1(input: string, config?: GS1ParserConfig): GS1ParseResult`

–ë—ã—Å—Ç—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –ø–∞—Ä—Å–µ—Ä–∞ –∏ –ø–∞—Ä—Å–∏—Ç –≤—Ö–æ–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É.

## –¢–∏–ø—ã

### GS1Token

```typescript
{
  ai: string;           // Application Identifier (–Ω–∞–ø—Ä–∏–º–µ—Ä, "01", "10", "91")
  value: string;        // –ó–Ω–∞—á–µ–Ω–∏–µ AI
  variable: boolean;    // –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ AI —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª–∏–Ω–æ–π
  startPos: number;     // –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ –∏—Å—Ö–æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
  endPos: number;       // –ö–æ–Ω–µ—á–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ –∏—Å—Ö–æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
}
```

### GS1ParseResult

```typescript
{
  success: boolean;     // –£—Å–ø–µ—à–µ–Ω –ª–∏ –ø–∞—Ä—Å–∏–Ω–≥
  tokens: GS1Token[];   // –ú–∞—Å—Å–∏–≤ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
  cleanedString: string; // –û—á–∏—â–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏
  error?: string;       // –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ, –µ—Å–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ —É–¥–∞–ª—Å—è
}
```

### GS1ParserConfig

```typescript
{
  separator?: string;   // –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –≤–º–µ—Å—Ç–æ {GS}
  prioritize9199?: boolean; // –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–∏ AI 91-99
  scannerReplacements?: Record<string, string>; // –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∑–∞–º–µ–Ω—ã —Å–∫–∞–Ω–µ—Ä–∞
}
```

## –ü—Ä–∏–º–µ—Ä—ã

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import { GS1Parser } from '@trin4ik/gs1parser';

const parser = new GS1Parser();
const result = parser.parse('010123456789012817123456');

if (result.success) {
  console.log('–¢–æ–∫–µ–Ω—ã:', result.tokens);
  console.log('–û—á–∏—â–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞:', result.cleanedString);
} else {
  console.error('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞:', result.error);
}
```

### –ö–∞—Å—Ç–æ–º–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```typescript
import { GS1Parser } from '@trin4ik/gs1parser';

const parser = new GS1Parser({
  separator: '|',
  prioritize9199: false,
  scannerReplacements: {
    'XXX': '',
    'YYY': ''
  }
});

const result = parser.parse('0101234567890128XXX91123456');
// –†–µ–∑—É–ª—å—Ç–∞—Ç: '0101234567890128|91123456'
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–∫–∞–Ω–µ—Ä–∞

```typescript
import { GS1Parser } from '@trin4ik/gs1parser';

const parser = new GS1Parser();

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—â–∏—Ö –∑–∞–º–µ–Ω —Å–∫–∞–Ω–µ—Ä–∞
parser.addScannerReplacement('029', '');  // –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∫–∞–Ω–µ—Ä—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç "029"
parser.addScannerReplacement(' ', '');    // –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∫–∞–Ω–µ—Ä—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –ø—Ä–æ–±–µ–ª—ã

const result = parser.parse('0101234567890128 029 91123456');
// –†–µ–∑—É–ª—å—Ç–∞—Ç: '0101234567890128{GS}91123456'
```

### –†–∞–±–æ—Ç–∞ —Å AI –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª–∏–Ω—ã

```typescript
import { GS1Parser } from '@trin4ik/gs1parser';

const parser = new GS1Parser();
const result = parser.parse('011234567890123210BATCH12321SERIAL456');

console.log(result.tokens);
// [
//   { ai: '01', value: '12345678901232', variable: false },
//   { ai: '10', value: 'BATCH123', variable: true },
//   { ai: '21', value: 'SERIAL456', variable: true }
// ]
```

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ Application Identifiers

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –Ω–∞–±–æ—Ä GS1 Application Identifiers, –≤–∫–ª—é—á–∞—è:

### AI —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω–æ–π
- **00** (SSCC) - 18 —Ü–∏—Ñ—Ä
- **01** (GTIN) - 14 —Ü–∏—Ñ—Ä
- **02** (CONTENT) - 14 —Ü–∏—Ñ—Ä
- **11-17** (–î–∞—Ç—ã) - 6 —Ü–∏—Ñ—Ä (YYMMDD)
- **20** (VARIANT) - 2 —Ü–∏—Ñ—Ä—ã
- **310n-369n** (–ú–µ—Ä—ã) - 6 —Ü–∏—Ñ—Ä
- **410-417** (GLN) - 13 —Ü–∏—Ñ—Ä
- –ò –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ... ([–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫](https://ref.gs1.org/standards/genspecs/))

### AI —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª–∏–Ω–æ–π
- **10** (BATCH/LOT) - –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤
- **21** (SERIAL) - –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤
- **91-99** (INTERNAL) - –¥–æ 90 —Å–∏–º–≤–æ–ª–æ–≤
- **400-403** (Order/Route) - –¥–æ 30 —Å–∏–º–≤–æ–ª–æ–≤
- –ò –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ... ([–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫](https://ref.gs1.org/standards/genspecs/))

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ü–∞—Ä—Å–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º:

- –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ Application Identifiers
- –û–±—Ä–µ–∑–∞–Ω–Ω—ã–µ AI —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω–æ–π
- –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ü–∏—Ñ—Ä
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–±–æ—Ä–∫–∞

```bash
npm run build
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
npm test
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤

```bash
npx tsc --noEmit
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–í–∫–ª–∞–¥—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! –ù–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å Pull Request.
