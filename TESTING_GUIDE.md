# üß™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é GS1 Parser

## –°–ø–æ—Å–æ–±—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∞—à–µ–≥–æ –∫–æ–¥–∞

> üìñ [English version](TESTING_GUIDE_EN.md)

### 1. –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
cp examples/my-test-template.js my-test.js

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ my-test.js –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã
# –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
./scripts/test-my-code.sh my-test.js

# –ò–ª–∏ —á–µ—Ä–µ–∑ npm:
npm run test-my-code my-test.js
```

### 2. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –æ–±–æ–ª–æ—á–∫—É
./scripts/docker-dev.sh

# –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤—ã –º–æ–∂–µ—Ç–µ:
# - –°–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã
# - –ó–∞–ø—É—Å–∫–∞—Ç—å node
# - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```

### 3. –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker

```bash
# –ó–∞–ø—É—Å–∫ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
docker compose run --rm gs1parser node your-file.js

# –ó–∞–ø—É—Å–∫ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –æ–±–æ–ª–æ—á–∫–æ–π
docker compose run --rm -it gs1parser sh
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```javascript
const { GS1Parser } = require('./dist/index.js');

const parser = new GS1Parser();
const result = parser.parse('010123456789012891INTERNAL92DATA');

console.log(result.tokens);        // –ú–∞—Å—Å–∏–≤ —Ç–æ–∫–µ–Ω–æ–≤
console.log(result.cleanedString); // –û—á–∏—â–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
```

### –° –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

```javascript
const parser = new GS1Parser({
  separator: '|',                    // –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
  prioritize9199: false,             // –û—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 91-99
  scannerReplacements: {
    '029': '',                       // –£–¥–∞–ª–∏—Ç—å "029"
    ' ': '',                         // –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–±–µ–ª—ã
    'MY_CUSTOM': '',                 // –í–∞—à–∏ –∑–∞–º–µ–Ω—ã
  }
});
```

### –£–¥–æ–±–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è

```javascript
const { parseGS1 } = require('./dist/index.js');

const result = parseGS1('010123456789012891123456', {
  separator: '|'
});
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```javascript
{
  success: boolean,        // –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–∏–Ω–≥–∞
  tokens: [               // –ú–∞—Å—Å–∏–≤ —Ç–æ–∫–µ–Ω–æ–≤
    {
      ai: '01',           // Application Identifier
      value: '01234567890128', // –ó–Ω–∞—á–µ–Ω–∏–µ
      variable: false,    // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è/–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª–∏–Ω–∞
      startPos: 0,        // –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
      endPos: 16          // –ö–æ–Ω–µ—á–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
    }
  ],
  cleanedString: '0101234567890128{GS}91123456', // –û—á–∏—â–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
  error?: string          // –û—à–∏–±–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
}
```

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ AI

### –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ AI
- **00** (SSCC) - 18 —Ü–∏—Ñ—Ä
- **01** (GTIN) - 14 —Ü–∏—Ñ—Ä
- **11-17** (–î–∞—Ç—ã) - 6 —Ü–∏—Ñ—Ä (YYMMDD)
- **20** (Variant) - 2 —Ü–∏—Ñ—Ä—ã
- **410-417** (GLN) - 13 —Ü–∏—Ñ—Ä
- –ò –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ...

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ AI
- **10** (Batch/Lot) - –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤
- **21** (Serial) - –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤
- **91-99** (Internal) - –¥–æ 90 —Å–∏–º–≤–æ–ª–æ–≤
- **400-403** (Order/Route) - –¥–æ 30 —Å–∏–º–≤–æ–ª–æ–≤
- –ò –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ...

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```javascript
const result = parser.parse('invalid-string');

if (!result.success) {
  console.log('–û—à–∏–±–∫–∞:', result.error);
  // –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏:
  // - "Unknown AI at position X"
  // - "Truncated fixed AI XX at position X"
  // - "Invalid digits for fixed AI XX at position X"
}
```

## –°–æ–≤–µ—Ç—ã –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

1. **–ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫** - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –±–∞–∑–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
2. **–î–æ–±–∞–≤—å—Ç–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–∫–∞–Ω–µ—Ä–∞** - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ—á–∏—Å—Ç–∫—É
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ AI 91-99** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è
4. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Å—Ç—Ä–æ–∫–∏** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ AI –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ
2. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –æ—à–∏–±–∫–∏** - –æ–Ω–∏ –¥–∞—é—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏ –æ –ø—Ä–æ–±–ª–µ–º–µ
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–∏–º–µ—Ä—ã** - –Ω–∞—á–Ω–∏—Ç–µ —Å –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö —Å—Ç—Ä–æ–∫
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
